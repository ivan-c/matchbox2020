FROM alpine:3.10
RUN apk --update-cache add dnsmasq

ARG TFTP_ROOT=/var/lib/tftpboot
RUN mkdir $TFTP_ROOT
ADD http://boot.ipxe.org/undionly.kpxe $TFTP_ROOT
ADD http://boot.ipxe.org/ipxe.efi $TFTP_ROOT
RUN chmod -R 644 $TFTP_ROOT

EXPOSE 53 67 69
ENTRYPOINT ["/usr/sbin/dnsmasq"]
